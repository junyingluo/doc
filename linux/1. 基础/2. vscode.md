### 连接 ubuntu

- ubuntu(vmware)

```
sudo apt install openssh-server -y
sudo systemctl start ssh #立即启动SSH服务
sudo systemctl enable ssh #设置SSH服务开机自启
```

- windows 安装 vscode 插件 Remote - SSH

- windows 中生成密钥 ssh-keygen -t rsa -b 4096，将 C:\Users\xxx\.ssh\id_rsa.pub 拷贝到 ubuntu 中 ~/.ssh/authorized_keys 中

### 连接 wsl

- 进入 wsl 中 ubuntu 20.04
- cd ~/runninglinuxkernel_5.0
- code .

### 安装 microsoft c++ 插件

### 配置

- .vscode/c_cpp_properties.json

```json
{
  "configurations": [
    {
      "name": "Linux Kernel (AArch64)",
      "includePath": [
        "${workspaceFolder}/**",
        "${workspaceFolder}/arch/arm64/include",
        "${workspaceFolder}/arch/arm64/include/generated",
        "${workspaceFolder}/include",
        "${workspaceFolder}/include/generated/uapi",
        "${workspaceFolder}/include/uapi",
        "/usr/aarch64-linux-gnu/include" // 交叉编译工具链头文件
      ],
      "defines": [
        "__KERNEL__",
        "MODULE",
        "linux",
        "__aarch64__",
        "CONFIG_ARM64"
      ],
      "compilerPath": "/usr/bin/aarch64-linux-gnu-gcc", // 交叉编译器
      "cStandard": "gnu11",
      "cppStandard": "gnu++14",
      "intelliSenseMode": "linux-gcc-arm64"
    }
  ],
  "version": 4
}
```

- .vscode/launch.json

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "kernel-debug",
      "type": "cppdbg",
      "request": "launch",
      "args": [],
      "stopAtEntry": false,
      "externalConsole": false,
      "cwd": "${workspaceFolder}",
      "program": "${workspaceFolder}/vmlinux",
      "miDebuggerPath": "/usr/bin/gdb-multiarch",
      "MIMode": "gdb",
      "miDebuggerServerAddress": "127.0.0.1:1234",
      "logging": {
        "engineLogging": false
      }
    }
  ]
}
```
