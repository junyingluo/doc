### 编译设备驱动

- cd /mnt/rlk_lab/rlk_basic/chapter_6_device_driver/lab1_simple_driver

* make

* insmod ./mydemo.ko

  ```
  [38236.319578] succeeded register char device: my_demo_dev
  [38236.320449] Major number = 247, minor number = 0
  ```

- cat /proc/devices

  ```
  Character devices:
  	1 mem
  	4 /dev/vc/0
  	4 tty
  	4 ttyS
  	5 /dev/tty
  	5 /dev/console
  	5 /dev/ptmx
  	5 ttyprintk
  	7 vcs
   10 misc
   13 input
   29 fb
  128 ptm
  136 pts
  204 ttyAMA
  247 my_demo_dev
  248 binder
  249 vfio
  250 bsg
  251 watchdog
  252 rtc
  253 dax
  254 gpiochip

  Block devices:
  	7 loop
  254 virtblk
  259 blkext
  ```

### 创建设备节点

- mknod /dev/demo_drv c 247 0

- ls -la /dev

```bash
crw-r--r--  1 root root    247,   0 Nov  9 15:49 demo_drv
```

### 创建用户程序

- gcc ./test.c -o test

- ./test
