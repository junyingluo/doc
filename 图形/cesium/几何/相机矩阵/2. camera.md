### 成员

- position 为实时坐标，而 \_position 为缓存坐标，用于判断 position 是否发生变化
  - 坐标系由 transform 决定。如果 transform 为单位矩阵，则为世界坐标（ECEF）
  * positionWC 为世界坐标（ECEF）= actualTransform \* position

    ```js
    Object.defineProperties(Camera.prototype, {
      positionWC: {
        get: function () {
          updateMembers(this);
          return this._positionWC;
        },
      },
    });
    ```

* direction 为相机朝向

* \_transform 用于坐标系变化
  - 3d 模式下，\_actualTransform = \_transform，\_actualInvTransform = \_invTransform

* \_viewMatrix
  - 在 \_setTransform 中，position、direction、up、right 会乘以 \_actualInvTransform，因此，这里要乘以 \_actualInvTransform 用以消除 transform 影响

  ```js
  function updateViewMatrix(camera) {
    Matrix4.computeView(
      camera._position,
      camera._direction,
      camera._up,
      camera._right,
      camera._viewMatrix,
    );
    Matrix4.multiply(
      camera._viewMatrix,
      camera._actualInvTransform,
      camera._viewMatrix,
    );
    Matrix4.inverseTransformation(camera._viewMatrix, camera._invViewMatrix);
  }
  ```
