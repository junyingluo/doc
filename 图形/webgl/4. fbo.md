### FBO

- FBO 只是一个空壳，其本身并没有图像数据存储区。因而，在使用 FBO 前，需要为其申请一块 Buffer(Texture 或 RenderBuffer)。也就是说，对 FBO 的操作，事实上，作用在其关联的 Buffer 上。

- 通常 Texture 存放 Color 缓存，而 RenderBuffer 存放 Depth 或 Stencil 缓存

![alt text](<assets/4. fbo/fbo.png>)

### bindFramebuffer

- 切换到 fbo

  ```js
  const fbo = gl.createFramebuffer();
  // 将该 fbo 设置为当前绘图帧
  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);
  ```

- 切换到屏幕
  - gl.bindFramebuffer(gl.FRAMEBUFFER, null)

### 绑定到纹理

- 将 Color 缓存绑定到 texture，在该 fbo 绘图会同步到 texture 上

```js
gl.framebufferTexture2D(
  gl.FRAMEBUFFER,
  gl.COLOR_ATTACHMENT0,
  gl.TEXTURE_2D,
  texture,
  0,
);
```

### 绑定到 RenderBuffer

- 创建 RenderBuffer

```js
var rbo = gl.createRenderbuffer();
gl.bindRenderbuffer(gl.RENDERBUFFER, rbo);
gl.renderbufferStorage(
  gl.RENDERBUFFER,
  gl.DEPTH_COMPONENT16,
  framebuffer.width,
  framebuffer.height,
);
```

- 绑定

```js
gl.framebufferRenderbuffer(
  gl.FRAMEBUFFER,
  gl.DEPTH_ATTACHMENT,
  gl.RENDERBUFFER,
  rbo,
);
```
